FROM oven/bun:1.3.5-slim AS base
WORKDIR /app

# Copy the entire monorepo
COPY . .

# Install dependencies
RUN bun install

# Build the specific service (passed as build arg)
ARG SERVICE_PATH
WORKDIR /app/${SERVICE_PATH}
RUN bun build ./src/index.ts --outdir ./dist

EXPOSE 3000
CMD ["bun", "dist/index.js"]
